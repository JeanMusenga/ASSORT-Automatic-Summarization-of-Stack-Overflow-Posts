

# Automated Summarization of Stack Overflow Posts

Navigating SO posts for solutions to programming tasks and comparing solutions in different posts is a challenging task for programmers with a limited time budget. To provide tool support for fast SO post navigation, we present ASSORT: a framework for generating sentence-level extractive summaries of Stack Overflow (SO) posts.  ASSORT is consist of two components:  ASSORT<sub>S</sub>, a novel ensemble-based supervised model architecture for extractive SO post summarization, and ASSORT<sub>IS</sub>, an indirect supervision approach that requires no expensive labeled data for the same task.  In this work, we perform a quantitative analysis of the performance of ASSORT<sub>S</sub> and ASSORT<sub>IS</sub> by comparing them against 6 carefully selected baselines including a state-of-the-art transformer-based extractive summarization model. We also perform a user study to learn how real programmers perceive summaries generated by ASSORT.  Data and codes to replicate our work are included in this repository, as well as the user study results and a Chrome extension with ASSORT implemented that allows online SO post summarization.

## Data
For training and testing purposes, we expanded SOSum, the first dataset of SO post summaries, following the same procedure described in **"SOSum: A Dataset of Stack Overflow Post Summaries."**[^fn1] The dataset can be found as a csv file with the path of `data/dataset.csv`. Specifically, `dataset.csv` contains the following columns:

 - sentence: A sentence from a SO post.
 - answer_id: Id of the answer post.
 - question_id: Id of the question post.
 - answer_body: The answer post. Most HTML tags are removed for clarity but some are preserved for calculating explicit features, such as `<code>`.
 - position: The position of the sentence in the post. E.g. 1 means the first sentence in the post.
 - question_title: Title of the question, used to classify the question.
 - truth: Whether the sentence is selectd as a summative sentence or not by the human labelers.
 - tags: The SO tags associated with the question.
 - question_type: Questions are classified into three distinct categories---*how-to questions*,  *conceptual questions*, and *bug fixing questions*. How-to questions ask for instructions for achieving a task, e.g., "how do I undo the most recent local commits in Git?". Conceptual questions ask for clarifications on a concept, e.g., "what are metaclasses in Python?'". Bug fixing questions ask for solutions to fix some issues, e.g. "git is not working after macOS Update". The question type. 1=Conceptual, 2=How-to, 3=Bug-fixing
 - question_body: The question description.

In general, the entire dataset contains sentences from 3,063 SO posts under popular questions and their manually curated summaries.  Among these answer posts, 254 of them are answers to *how-to questions*, 322 to *conceptual questions*, and 209 to *bug-fixing questions*. We split the entire dataset into train/dev/test sets by the ratio of 8:1:1.

[^fn1]: Kou, Bonan, et al. "SOSum: A Dataset of Stack Overflow Post Summaries." _2022 IEEE/ACM 19th International Conference on Mining Software Repositories (MSR)_. IEEE, 2022.
## ASSORT<sub>S</sub>,
As our supervised model for summarizing SO posts, ASSORT achieves desirable performance on sentence-level extractive summarization of SO posts, outperforming a state-of-the-art extractive summarization model by 13% in terms of F1 score. ASSORT<sub>S</sub> takes three phases to summarize a SO answer post. Since answers to different types of questions follow different linguistic patterns, it first predicts the type of the SO question (Phase I). To account for the uncertainty of the question classifier, the answer post is fed into three sentence classification models separately, each of which is trained for one type of SO question (Phase II). ASSORT<sub>S</sub> predicts confidence scores with multiple sentence classifiers trained for different question categories. Finally, it ensembles the predictions of these models based on the likelihood of the question type to generate the final summary (Phase III). The figure below visualizes the three phases.
[![Supervised](https://github.com/BonanKou/ASSORT-Automatic-Summarization-of-Stack-Overflow-Posts/blob/main/screenshots/supervised.png "Supervised")](http://github.com/BonanKou/ASSORT-Automatic-Summarization-of-Stack-Overflow-Posts/blob/main/screenshots/supervised.png "Supervised")


The script for training the question classifier and sentence classifier can be found in `model` folder. For example, if you want to train a question classifier from scratch, simply run:
`python train_question_classifier.py`

By default, this file will split the train/dev/test sets with the ratio of 8:1:1 to train a question classifer which is a SVM classifier. After training is done, the script will evaluate the classifier's performance on the test set.

Similarly, to train a sentence classifier from scratch, run:
`python train_sentence_classifier.py`

## ASSORT<sub>IS</sub>,

## Chrome extension

## Experiment scripts

## User Study


## SOSum 
### Sentence-level SO post summarization
Stack Overflow (SO) is becoming an indispensable part of the modern software development workflow. However, navigating SO posts and comparing different solutions is time-consuming and cumbersome given the limited time, attention, and memory capacity of programmers. Recent research has proposed to summarize SO posts to concise text to help programmers quickly decide the relevance and quality of SO posts. Yet there is no large, comprehensive dataset of high-quality SO post summaries, which hinders the development and evaluation of post summarization techniques. We present SOSum, a dataset of 2278 popular SO posts with manually labeled summative sentences. Questions in SOSum cover 669 tags with a median view count of 253K and a median post score of 17. This dataset will foster research on sentence-level summarization of SO posts and has the potential to facilitate text summarization research on other types of textual software artifacts such as programming tutorials.

### Data format
SOSum is stored in two separate CSV files: `question.csv` and `answer.csv`. Both can be found in `data` folder.
`question.csv` contains metadata of 506 popular SO questions. We summarize its fields as below:
|Field | Description|
| ----------- | ----------- |
|Question Id| Post Id of the SO question|
|Question Type| 1 for conceptual questions, 2 for how-to questions, 3 for debug-corrective questions|
|Question Title |Question title as a string|
|Question Body |A list of sentences from the question post content|
|Tags |SO tags associated with a question|
|Answer Posts| A list of post ids separated by comma|

`answer.csv` contains metadata of 506 popular SO questions. We summarize its fields as below:
|Field | Description|
| ----------- | ----------- |
|Answer Id |Post Id of a SO answer post|
|Answer Body |A list of sentences from the post content|
|Summary |Summative sentences from the post content|

## Labeling tools
Both the GUI and chrome extension can be found in `labeling_tools` folder.

### GUI for labeling CSV files
~A GUI tool is developed to facilitate labeling of SO posts in CSV files with the same format of `question.csv` and `answer.csv`.~ (**Update on 2/2/2022. Instead of `question.csv` and `answer.csv`, load `example.csv` under the `labeling_tools` folder in the GUI.**) A screenshot of our GUI is displayed below.
![A screenshot of GUI](https://github.com/BonanKou/SOSum-A-Dataset-of-Extractive-Summaries-of-Stack-Overflow-Posts-and-labeling-tools/blob/main/screenshot_wide.png)


### Chrome extension for online labeling
A link for tutorial video: https://youtu.be/Xo5JyW486O4.

As many new SO posts are posted everyday, one may also be interested in labeling SO posts from the website rather than the data dump. Therefore, we also developed a Chrome extension for labeling SO posts in the web browser. A user can select one or more sentences from a post, right click, and choose ``Mark as Summative Sentence'' to label them as summative sentences. Once the labeling is done, the user can press ``CTRL+ENTER'' to download the post content as well as the labeled summative sentences into a CSV file.




